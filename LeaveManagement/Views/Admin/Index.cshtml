@model IEnumerable<ApplicationUser>

@{
    ViewData["Title"] = "Employee Directory";
    Layout = "~/Views/Shared/_ManagerLayout.cshtml";
}

<div class="container-fluid py-4">
    <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
        <!-- Header -->
        <div class="card-header bg-white border-0 py-3 d-flex flex-wrap justify-content-between align-items-center">
            <div>
        
                <p class="text-muted mb-0"><strong>View and manage all employees in your organisation</strong></p>
            </div>
            <a asp-action="Create" class="btn btn-light fw-semibold rounded-pill px-4 mt-2 mt-md-0 shadow-sm">
                <i class="bi bi-person-plus me-2"></i> Add Employee
            </a>
        </div>

        <!-- Table -->
        <div class="card-body p-3 p-md-4">
            <div class="table-responsive">
                <table id="employeeTable" class="table table-hover align-middle w-100">
                    <thead class="table-light">
                        <tr>
                            <th>Name</th>
      
                            <th>Joining Date</th>
                            <th>Status</th>
                            <th>Salary Detail</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var employee in Model)
                        {
                            <tr>
                                <td class="d-flex align-items-center">
                                    <div class="avatar me-3">
                                        <i class="bi bi-person-circle text-primary fs-3"></i>
                                    </div>
                                    <div>
                                        <span class="fw-semibold text-dark">@employee.FullName</span><br />
                                        <small class="text-muted">@employee.Email</small>
                                    </div>
                                </td>
                    
                                <td>@employee.JoiningDate.ToString("dd MMM yyyy")</td>
                                <td>
                                    <span class="badge rounded-pill px-3 py-2 bg-@(employee.IsActive ? "success-subtle text-success" : "danger-subtle text-danger")">
                                        @(employee.IsActive ? "Active" : "Inactive")
                                    </span>
                                </td>
                                <td>
                                    <a asp-action="SalaryDetail" asp-route-id="@employee.Id"
                                       class="btn btn-outline-primary btn-sm rounded-pill px-3">
                                        <i class="bi bi-receipt me-1"></i> View Slip
                                    </a>
                                </td>
                                <td class="text-center">
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-light rounded-circle" data-bs-toggle="dropdown">
                                            <i class="bi bi-three-dots-vertical"></i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end shadow">
                                            <li>
                                                <a class="dropdown-item" href="@Url.Action("Edit", new { id = employee.Id })">
                                                    <i class="bi bi-pencil text-primary me-2"></i>Edit
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="@Url.Action("LeaveByUser", new { id = employee.Id })">
                                                    <i class="bi bi-calendar-check text-info me-2"></i>Leave Details
                                                </a>
                                            </li>
                                            <li><hr class="dropdown-divider" /></li>
                                            <li>
                                                <a class="dropdown-item text-danger"
                                                   href="@Url.Action("Delete", new { id = employee.Id })"
                                                   onclick="return confirm('Are you sure you want to delete this user?')">
                                                    <i class="bi bi-trash me-2"></i>Delete
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#employeeTable').DataTable({
                responsive: true,
                pageLength: 8,
                lengthChange: false,
                ordering: true,
                info: false,
                language: {
                    search: "",
                    searchPlaceholder: "Search employees..."
                },
                dom: '<"d-flex flex-wrap justify-content-between align-items-center mb-3"f>t<"mt-3 d-flex justify-content-between"ip>',
            });

            // Subtle hover glow
            $('#employeeTable tbody tr').hover(
                function () { $(this).addClass('shadow-sm table-row-hover'); },
                function () { $(this).removeClass('shadow-sm table-row-hover'); }
            );
        });
    </script>
}

<style>
    /* 🔹 Table & Card Design */
    .card {
        border-radius: 18px;
        background: #ffffffcc;
        backdrop-filter: blur(12px);
    }

    .table {
        border-collapse: separate;
        border-spacing: 0 0.6rem;
    }

        .table thead th {
            font-weight: 600;
            color: #555;
            border-bottom: 2px solid #e9ecef;
        }

        .table tbody tr {
            background-color: #fff;
            transition: all 0.25s ease-in-out;
        }

   

    /* 🔹 DataTable Search Box */
    .dataTables_filter input {
        border-radius: 25px;
        padding: 6px 14px;
        border: 1px solid #ddd;
        width: 250px !important;
    }

    .dataTables_filter label {
        font-weight: 500;
        color: #555;
    }

    /* 🔹 Responsive Adjustments */
    @@media (max-width: 770px) {
        .card-header

    {
        flex-direction: column;
        align-items: flex-start;
    }

    .card-header .btn {
        width: 100%;
    }

    .dataTables_filter input {
        width: 100% !important;
    }

    }
</style>
